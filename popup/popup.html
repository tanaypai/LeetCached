<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LeetCached</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="popup-container">
    <!-- Header -->
    <header class="popup-header">
      <div class="header-brand">
        <div class="logo-container">
          <img src="../icons/icon48.png" alt="LeetCached" class="logo-img">
        </div>
        <h1 class="brand-title">LeetCached</h1>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <nav class="nav-tabs">
      <button class="nav-tab active" data-tab="calendar">
        <span class="material-symbols-outlined">calendar_month</span>
        <span>Calendar</span>
      </button>
      <button class="nav-tab" data-tab="manage">
        <span class="material-symbols-outlined">list_alt</span>
        <span>Manage</span>
      </button>
      <button class="nav-tab" data-tab="help">
        <span class="material-symbols-outlined">help</span>
        <span>Help</span>
      </button>
    </nav>

    <!-- Calendar View -->
    <div id="calendar-view" class="view active">
      <!-- Stats Cards -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-icon stat-icon-today">
            <span class="material-symbols-outlined">today</span>
          </div>
          <div class="stat-content">
            <span class="stat-number" id="today-count">0</span>
            <span class="stat-label">Due Today</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon stat-icon-total">
            <span class="material-symbols-outlined">event_upcoming</span>
          </div>
          <div class="stat-content">
            <span class="stat-number" id="upcoming-count">0</span>
            <span class="stat-label">This Week</span>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon stat-icon-completed">
            <span class="material-symbols-outlined">check_circle</span>
          </div>
          <div class="stat-content">
            <span class="stat-number" id="total-count">0</span>
            <span class="stat-label">Total</span>
          </div>
        </div>
      </div>

      <!-- Calendar + Problems Side by Side -->
      <div class="calendar-layout">
        <!-- Calendar Section -->
        <div class="calendar-section">
          <div class="calendar-container">
            <div class="calendar-header">
              <div class="calendar-nav">
                <h2 id="current-month" class="month-title"></h2>
                <div class="nav-buttons">
                  <button id="prev-month" class="nav-btn">
                    <span class="material-symbols-outlined">chevron_left</span>
                  </button>
                  <button id="next-month" class="nav-btn">
                    <span class="material-symbols-outlined">chevron_right</span>
                  </button>
                </div>
              </div>
              <button id="today-btn" class="today-btn">Today</button>
            </div>

            <div class="calendar-weekdays">
              <span>SUN</span>
              <span>MON</span>
              <span>TUE</span>
              <span>WED</span>
              <span>THU</span>
              <span>FRI</span>
              <span>SAT</span>
            </div>

            <div id="calendar-days" class="calendar-days"></div>
          </div>
        </div>

        <!-- Problems Sidebar -->
        <div class="problems-sidebar">
          <div class="sidebar-header">
            <div class="sidebar-title">
              <h3 id="sidebar-date">Select a Date</h3>
              <span id="sidebar-count" class="count-badge">0 problems</span>
            </div>
          </div>
          <div id="sidebar-problems-list" class="sidebar-problems-list">
            <div class="empty-sidebar">
              <span class="material-symbols-outlined">calendar_today</span>
              <p>Click on a date to view scheduled problems</p>
            </div>
          </div>
          <div class="sidebar-footer">
            <button class="btn-add-review" id="add-custom-review-btn">
              <span class="material-symbols-outlined">add</span>
              Add Custom Review
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Manage View -->
    <div id="manage-view" class="view">
      <div class="manage-container">
        <!-- Search and Filters -->
        <div class="manage-toolbar">
          <div class="search-container">
            <span class="material-symbols-outlined search-icon">search</span>
            <input type="text" id="search-input" class="search-input" placeholder="Search by name or topic...">
          </div>

          <button class="btn-add-problem" id="add-problem-btn" title="Add problem manually">
            <span class="material-symbols-outlined">add</span>
            <span>Add</span>
          </button>
        </div>

        <!-- Problems Table -->
        <div class="manage-table-container">
          <div class="manage-table-header">
            <span class="col-problem sortable" data-sort="title">
              Problem
              <span class="material-symbols-outlined sort-icon">unfold_more</span>
            </span>
            <span class="col-difficulty sortable" data-sort="difficulty">
              Difficulty
              <span class="material-symbols-outlined sort-icon">unfold_more</span>
            </span>
            <span class="col-next sortable active" data-sort="nextReview">
              Next Review
              <span class="material-symbols-outlined sort-icon">arrow_upward</span>
            </span>
            <span class="col-actions">Link</span>
          </div>
          <div id="manage-problems-list" class="manage-problems-list"></div>
        </div>

        <!-- Pagination Info -->
        <div class="manage-footer">
          <span class="problem-count-text">
            Showing <span id="manage-count">0</span> problems
          </span>
        </div>
      </div>
    </div>

    <!-- Help View -->
    <div id="help-view" class="view">
      <div class="help-layout">
        <!-- Help Sidebar Navigation -->
        <aside class="help-sidebar">
          <div class="help-sidebar-header">
            <h3>Help Center</h3>
            <p>Find answers and tips</p>
          </div>
          <nav class="help-nav">
            <a href="#" class="help-nav-item active" data-section="getting-started">
              <span class="material-symbols-outlined">rocket_launch</span>
              <span>Getting Started</span>
            </a>
            <a href="#" class="help-nav-item" data-section="features">
              <span class="material-symbols-outlined">stars</span>
              <span>Features</span>
            </a>
            <a href="#" class="help-nav-item" data-section="faq">
              <span class="material-symbols-outlined">help</span>
              <span>FAQs</span>
            </a>
            <a href="#" class="help-nav-item" data-section="contact">
              <span class="material-symbols-outlined">mail</span>
              <span>Contact Support</span>
            </a>
          </nav>
        </aside>

        <!-- Help Content -->
        <main class="help-content">
          <!-- Getting Started Section -->
          <section id="help-getting-started" class="help-section-content active">
            <h3 class="section-title">How It Works</h3>
            <div class="steps-grid">
              <div class="step-card">
                <div class="step-number">1</div>
                <div class="step-icon">
                  <span class="material-symbols-outlined">extension</span>
                </div>
                <div class="step-text">
                  <h4>Install Extension</h4>
                  <p>Pin LeetCached to your toolbar for easy access.</p>
                </div>
              </div>
              <div class="step-card">
                <div class="step-number">2</div>
                <div class="step-icon">
                  <span class="material-symbols-outlined">code</span>
                </div>
                <div class="step-text">
                  <h4>Solve on LeetCode</h4>
                  <p>When you submit a solution, we auto-detect it.</p>
                </div>
              </div>
              <div class="step-card">
                <div class="step-number">3</div>
                <div class="step-icon">
                  <span class="material-symbols-outlined">update</span>
                </div>
                <div class="step-text">
                  <h4>Review Smartly</h4>
                  <p>Spaced repetition schedules optimal review times.</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Features Section -->
          <section id="help-features" class="help-section-content">
            <h3 class="section-title">Key Features</h3>
            <div class="features-list">
              <div class="feature-item">
                <span class="material-symbols-outlined feature-icon cyan">autorenew</span>
                <div>
                  <h4>Auto-Detection</h4>
                  <p>No manual entry needed. We sync your successful submissions instantly from LeetCode.</p>
                </div>
              </div>
              <div class="feature-item">
                <span class="material-symbols-outlined feature-icon purple">schedule</span>
                <div>
                  <h4>Smart Scheduling</h4>
                  <p>Optimized intervals based on the forgetting curve to maximize long-term retention.</p>
                </div>
              </div>
              <div class="feature-item">
                <span class="material-symbols-outlined feature-icon green">calendar_month</span>
                <div>
                  <h4>Calendar View</h4>
                  <p>Visualize your upcoming reviews and track your progress at a glance.</p>
                </div>
              </div>
              <div class="feature-item">
                <span class="material-symbols-outlined feature-icon orange">tune</span>
                <div>
                  <h4>Flexible Management</h4>
                  <p>Manually adjust intervals, skip reviews, or mark problems as mastered.</p>
                </div>
              </div>
            </div>
          </section>

          <!-- FAQ Section -->
          <section id="help-faq" class="help-section-content">
            <h3 class="section-title">Frequently Asked Questions</h3>
            <div class="faq-list">
              <details class="faq-item">
                <summary>Why isn't my submission showing up?</summary>
                <div class="faq-answer">
                  Please ensure you are logged into LeetCode and the extension is active. Submissions are only tracked if they are "Accepted". Try refreshing the LeetCode page after submitting.
                </div>
              </details>
              <details class="faq-item">
                <summary>Does this work with LeetCode Premium?</summary>
                <div class="faq-answer">
                  Yes! LeetCached works with both free and premium LeetCode accounts. We track problems regardless of their lock status, as long as you have access to submit them.
                </div>
              </details>
              <details class="faq-item">
                <summary>How do I reset my progress?</summary>
                <div class="faq-answer">
                  You can delete individual problems from the "Manage" tab by clicking on a problem and selecting Delete. To clear all data, you can clear the extension's storage in Chrome settings.
                </div>
              </details>
              <details class="faq-item">
                <summary>Can I customize the review intervals?</summary>
                <div class="faq-answer">
                  Yes! When adding a problem, you can choose from preset intervals (Standard, Intensive, Relaxed) or set custom intervals. You can also edit intervals later from the Manage tab.
                </div>
              </details>
            </div>
          </section>

          <!-- Contact Section -->
          <section id="help-contact" class="help-section-content">
            <h3 class="section-title">Contact Support</h3>
            <div class="contact-card">
              <div class="contact-icon">
                <span class="material-symbols-outlined">mail</span>
              </div>
              <h4>Need more help?</h4>
              <p>Reach out to us directly and we'll get back to you as soon as possible.</p>
              <a href="mailto:tanayvpai@gmail.com" class="btn btn-primary contact-btn">
                <span class="material-symbols-outlined">send</span>
                Email Support
              </a>
            </div>
          </section>
        </main>
      </div>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal hidden">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Edit Schedule</h3>
          <button class="close-btn modal-close">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="edit-problem-title" id="edit-problem-title"></div>
          
          <div class="timeline-section">
            <div class="timeline-header">
              <span class="timeline-title">Scheduled Reviews</span>
            </div>
            <div id="edit-dates-list" class="timeline-list"></div>
            <button class="btn-add-repetition" id="add-date-btn">
              <span class="material-symbols-outlined">add</span>
              Add Repetition
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-danger" id="delete-problem-btn">
            <span class="material-symbols-outlined">delete</span>
            Delete
          </button>
          <button class="btn btn-primary" id="save-changes-btn">
            <span class="material-symbols-outlined">save</span>
            Save
          </button>
        </div>
      </div>
    </div>

    <!-- Add Problem Modal -->
    <div id="add-problem-modal" class="modal">
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>Add Problem</h3>
          <button class="close-btn add-modal-close">
            <span class="material-symbols-outlined">close</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label>Problem Title *</label>
            <input type="text" id="new-problem-title" class="form-input" placeholder="e.g., Two Sum">
          </div>
          <div class="form-group">
            <label>LeetCode URL *</label>
            <input type="text" id="new-problem-url" class="form-input" placeholder="https://leetcode.com/problems/two-sum">
          </div>
          <div class="form-group">
            <label>Difficulty</label>
            <select id="new-problem-difficulty" class="form-select">
              <option value="Easy">Easy</option>
              <option value="Medium" selected>Medium</option>
              <option value="Hard">Hard</option>
            </select>
          </div>
          
          <div class="timeline-section">
            <div class="timeline-header">
              <span class="timeline-title">Review Schedule</span>
            </div>
            <div id="add-problem-dates-list" class="timeline-list"></div>
            <button class="btn-add-repetition" id="add-problem-add-date-btn">
              <span class="material-symbols-outlined">add</span>
              Add Repetition
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-add-btn">Cancel</button>
          <button class="btn btn-primary" id="confirm-add-btn">
            <span class="material-symbols-outlined">add</span>
            Add Problem
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
